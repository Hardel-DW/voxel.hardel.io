---
import type { CollectionEntry } from "astro:content";
import Button from "@/components/ui/button.astro";
import Faq from "@/components/ui/faq.astro";
import Preview from "./Preview";
const { user } = Astro.locals;

interface Props {
    schema: CollectionEntry<"guide">;
}

const { schema }: Props = Astro.props;
if (schema.data.premium === undefined) {
    throw new Error("Missing premium data");
}
---

<div class="flex justify-center items-center h-full w-full">
    <div
            class="min-w-96 max-h-full overflow-y-auto bg-zinc-950/30 border-zinc-800 border rounded-3xl p-8 md:p-16 grid xl:grid-cols-2 gap-12 shadow-xl shadow-pink-950/10">
        <Preview client:idle images={schema.data.premium.items}/>

        <div>
            <div class="flex justify-center gap-x-12">
                <h2 class="text-xl text-zinc-200 font-bold">{schema.data.premium.title}</h2>
                <p class="text-2xl text-zinc-100 text-end font-semibold">{schema.data.premium.price}{schema.data.premium.currency}</p>
            </div>
            <p class="text-sm text-zinc-400 mt-4">{schema.data.premium.description}</p>
            <Button size="sm"
                    href={schema.data.premium.url + '?checkout[custom][user_id]=' + user?.id}
                    class="mt-6 w-48">{schema.data.premium.button}</Button>

            <a href="https://voxel.lemonsqueezy.com/checkout/buy/7f8ad16c-0d25-455b-86e9-6e53691dbf2c?embed=1"
               class="mt-6 px-6 py-2 font-semibold space-x-10 inline-flex items-center gap-x-2">
                Buy Voxel - Les bases de Java et du modding -
                1.20+</a>

            <div class="mt-8">
                <Faq data={schema.data.premium.faq ?? []}/>
            </div>
        </div>
    </div>
</div>